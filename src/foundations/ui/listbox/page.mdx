export const metadata = {
  title: "Listbox",
  description: "A control for selecting a value from a list of options.",
  files: ["src/foundations/ui/listbox/listbox.tsx"],
  preview: "listbox",
  dependencies: [
    {
      name: "Popover",
      href: "/ui/popover",
    },
    {
      name: "@radix-ui/react-slot",
      href: "https://www.radix-ui.com/primitives/docs/utilities/slot",
    },
    {
      name: "@floating-ui/react",
      href: "https://floating-ui.com/docs/react",
    },
  ],
};

## Anatomy

```tsx
<Listbox value={value} onChange={onChange}>
  <ListboxTrigger />
  <ListboxOptions>
    <ListboxSearchInput />
    <ListboxOption />
    <ListboxDivider />
    <ListboxOption />
    <ListboxEmpty />
  </ListboxOptions>
</Listbox>
```

## Features

- **Keyboard Navigation**: Use arrow keys to navigate between options, Enter to select, and Escape to close
- **Search Functionality**: Built-in search input for filtering options
- **Multiple Selection**: Support for selecting multiple options with checkboxes
- **Custom Rendering**: Flexible API for custom option rendering
- **Form Integration**: Works seamlessly with form libraries
- **Accessibility**: Full ARIA support and keyboard navigation
- **Floating UI**: Smart positioning that adapts to available space

## API Reference

### Listbox

<PropsTable
  definition={{
    value: {
      type: "T | T[]",
      description:
        "The controlled value of the listbox. Can be a single value or an array for multiple selection.",
      required: true,
    },
    onChange: {
      type: "(value: T | T[]) => void",
      description: "Callback fired when the value changes.",
      required: true,
    },
    disabled: {
      type: "boolean",
      description: "Whether the listbox is disabled.",
      default: "false",
    },
    invalid: {
      type: "boolean",
      description: "Whether the listbox is in an invalid state.",
      default: "false",
    },
    placement: {
      type: '"selection" | Placement',
      description:
        "The placement of the options relative to the trigger. Use 'selection' to align with the selected option.",
      default: '"selection"',
    },
    getIsSelected: {
      type: "(a: T, b: T) => boolean",
      description:
        "Custom comparison function to determine if two values are equal.",
    },
    matchReferenceWidth: {
      type: "boolean",
      description: "Whether the options width should match the trigger width.",
      default: "true",
    },
  }}
/>

### ListboxTrigger

Extends the `button` element.

<PropsTable
  definition={{
    variant: {
      type: "InputProps['variant']",
      description: "The visual style variant to use.",
      default: '"default"',
    },
    placeholder: {
      type: "string",
      description: "The placeholder text to show when no value is selected.",
    },
  }}
/>

### ListboxOptions

Extends the `div` element.

The options will be rendered in a portal and will be positioned relative to the trigger.

### ListboxOption

Extends the `button` element.

<PropsTable
  definition={{
    value: {
      type: "T",
      description: "The value associated with this option.",
      required: true,
    },
    disabled: {
      type: "boolean",
      description: "Whether the option is disabled.",
      default: "false",
    },
    withCheckmark: {
      type: "boolean",
      description: "Whether to show a checkmark when the option is selected.",
      default: "true",
    },
  }}
/>

### ListboxDivider

A horizontal line to separate groups of options.

### ListboxSearchInput

Extends the `input` element.

A styled input with a search icon, useful for filtering options.

### ListboxEmpty

A styled container for empty state messages.

## Accessibility

The Listbox component follows the [WAI-ARIA Listbox Pattern](https://www.w3.org/WAI/ARIA/apg/patterns/listbox/). It includes proper ARIA attributes and keyboard navigation support.

### Keyboard Interactions

- `Space` or `Enter`: Select the focused option
- `ArrowUp` / `ArrowDown`: Navigate between options
- `Home` / `End`: Jump to first/last option
- `Escape`: Close the listbox
- `Tab`: Move focus to the next focusable element
- `Type`: Jump to options starting with the typed characters

## Examples

### Simple

Basic usage with single selection.

<Preview slug="listbox" />

### Minimal

Using the minimal variant without borders.

<Preview slug="listbox-minimal" />

### With Placeholder

Showing placeholder text when no value is selected.

<Preview slug="listbox-placeholder" />

### With Search

Filtering options with a search input.

<Preview slug="listbox-search" />

### Multiple Selection

Selecting multiple values with checkboxes.

<Preview slug="listbox-multiple" />

### With Divider

Using dividers to group options.

<Preview slug="listbox-divider" />

### Custom Rendering

Complex example with avatars and custom option layout.

<Preview slug="listbox-custom" />

### Form Field

Using the Listbox in a form with validation.

<Preview slug="listbox-form" />
