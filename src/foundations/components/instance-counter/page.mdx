export const metadata = {
  title: "Instance Counter",
  description:
    "A utility component that assigns unique indices to component instances and tracks their total count in the component tree.",
  files: ["src/foundations/components/instance-counter/instance-counter.tsx"],
};

## Features

- **Automatic Index Assignment**: Automatically assigns unique indices to component instances within a provider's scope.

- **Tree-Aware**: Maintains consistent indices across the entire component tree, even with deeply nested components.

- **Mount/Unmount Handling**: Automatically invalidates and recalculates indices when components mount or unmount, ensuring consistent ordering.

- **Instance Count Tracking**: Provides a callback to track the total number of instances in the component tree.

## API Reference

### InstanceCounterProvider

<PropsTable
  definition={{
    onChange: {
      type: "(length: number) => void",
      description: "The callback to call when the number of instances changes.",
    },
  }}
/>

### useInstanceCounter

Returns a `number` that represents the current index of the component within the `InstanceCounterProvider`.

## Examples

### Basic Usage

<Preview slug="instance-counter" />

### Stepper

<Preview slug="instance-counter-stepper" />

## Limitations

The indices are assigned based on the order of React's `useEffect` hook execution. While this generally matches the DOM order, if, for some reason, it does not, it may lead to unexpected behavior.
